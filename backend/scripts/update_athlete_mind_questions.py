#!/usr/bin/env python3
# backend/scripts/update_athlete_mind_questions.py
"""
アスリートマインド正式質問データ投入スクリプト（統合データローダー対応版）
99問スポーツマンシップメンタルテストシステム用
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from sqlalchemy.orm import Session
from sqlalchemy import func
from app.database import engine
from app.models.question import Question

# アスリートマインド正式質問データ（統合データローダー対応のsubcategory名を使用）
ATHLETE_MIND_QUESTIONS = {
    # 選手向けアスリートマインド質問
    'player': {
        'commitment': [  # こだわり（旧: detail_oriented）
            "練習や試合で自分の好きなプレーを繰り返して細かい部分を何度も直すのが好きですか？",
            "試合で自分が失敗した場面を思い出して「どうすればもっと良くなるか」を考えることが多いですか？",
            "練習や試合中、ユニフォームや道具が整っていないと気になってしまいますか？",
            "チームメイトに「こだわりすぎ」と言われることがあると思いますか？",
            "自分が思う「完璧なプレー」を目指して、最後まで頑張るタイプだと思いますか？"
        ],
        'result': [  # 結果（旧: results_oriented）
            "試合や練習で上手くいかなかったとき、どうすればもっと良い結果を出せるかを考えますか？",
            "得点や記録など、具体的な成果を達成することが目標だと思いますか？",
            "チームや個人の結果を振り返り、「次にもっと良くするためには何が必要か」を考えるのが好きですか？",
            "結果が出るまで努力を続けることが得意ですか？",
            "練習や試合中、結果を出すために自分ができることを常に考えていますか？"
        ],
        'steadiness': [  # 堅実（旧: steady）
            "練習や試合で、新しい技術を試すよりも、得意なプレーを確実に行うことを大事にしますか？",
            "試合前に、準備をしっかり整えてからプレーする方が安心しますか？",
            "チームメイトやコーチと相談しながら、計画を立てて動くことが好きですか？",
            "試合で大胆なプレーをするより、失敗の少ないプレーを選ぶことが多いですか？",
            "勝つためには、少しずつ確実に前に進む方が良いと思いますか？"
        ],
        'devotion': [  # 献身（旧: devoted）
            "チームの成功や自分の目標達成のために、自分が大変でも頑張りたいと思いますか？",
            "試合や練習中に、誰かが困っていると気づいたら、すぐに助けようとしますか？",
            "他の人がうまくできるようにサポートしたり、自分がリードすることが好きですか？",
            "自分が目立つよりも、チームが良い結果を出すことを優先することが多いですか？",
            "練習や試合で、必要なら自分の役割を柔軟に変えてチームや目標に貢献することができますか？"
        ],
        'self_control': [  # 克己（変更なし）
            "遊びたい気持ちがあっても、やるべきことに取り組むことができますか？",
            "試合や練習前に、しっかりと準備をしてから臨むことを大事にしていますか？",
            "自分の体調やスケジュールを考えて、無理をせずに計画的に行動することが得意ですか？",
            "大好きなお菓子やゲームを控えて、スポーツのために必要な習慣を守ることができますか？",
            "チームのために自分がやりたいことを我慢して、みんなに合わせることが得意ですか？"
        ],
        'assertion': [  # 主張（旧: assertive）
            "試合や練習で、自分の考えをチームメイトやコーチにしっかり伝えることが得意ですか？",
            "チームメイトと意見が違うとき、自分の意見を説明して納得してもらおうとしますか？",
            "練習中に「こうしたほうがいい」と思ったことを、自分から提案することがありますか？",
            "試合や練習の後、自分の気持ちや考えを他の人に話すことが多いですか？",
            "チームのために意見を言うことは大事だと思いますか？"
        ],
        'sensitivity': [  # 繊細（旧: sensitive）
            "試合や練習で、チームメイトや相手選手がいつもより元気がなかったり、黙っていたりすると、「何かあったのかな？」とか気になってしまうことが多いですか？",
            "誰かがミスをして落ち込んでいるとき、「自分に何かできることはないかな？」と考えますか？",
            "小さなミスや周囲の言葉が気になって練習や試合に集中できなくなることがありますか？",
            "「今みんなは自分のプレーをどう思っているかな？」と気になることがありますか？",
            "試合や練習のあと、うまくいかなかったプレーや仲間の一言をずっと考えていることがありますか？"
        ],
        'intuition': [  # 直感（旧: intuitive）
            "試合中に細かく考えるよりも、すぐに動いて対応することが得意ですか？",
            "練習で新しい技術を教わるとき、考えずに感覚で理解して試すことができますか？",
            "試合中や練習中に、「こうしたら上手くいく」というひらめきがよくありますか？",
            "チームや相手選手の動きを見て、どう動くべきかを直感的に判断することができますか？",
            "練習や試合では、細かい計画よりもその場の状況でベストな動きを考えるほうが得意ですか？"
        ],
        'introspection': [  # 内省（旧: introspective）
            "練習や試合が終わった後、自分の良かったところや反省点を考えることが多いですか？",
            "試合での失敗や成功について、「どうすればもっと良くなるか」を振り返ることがありますか？",
            "チームメイトやコーチとのやり取りを思い出して、自分の行動がどうだったかを考えることがありますか？",
            "自分の成長を感じたとき、その理由を深く考えるのが好きですか？",
            "試合の後、自分だけでなくチーム全体の課題や改善点を考えることが多いですか？"
        ],
        'comparison': [  # 比較（旧: comparative）
            "チームメイトと自分の技術やスキルを比べて、「もっと頑張ろう」と思うことがありますか？",
            "試合や練習で、他の選手の動きを見て学ぼうとすることが多いですか？",
            "自分が負けたとき、どうすれば勝てるかを考えるのが好きですか？",
            "他の選手よりも上手くなるために、何か新しい練習方法を試すことが好きですか？",
            "得点や記録を他の人と比べて自分がどれだけ成長したかを考えることがありますか？"
        ]
    },
    
    # コーチ向けアスリートマインド質問
    'coach': {
        'commitment': [  # こだわり
            "選手に指導する際、細かい技術や動作の改善に時間をかけることが多いですか？",
            "練習メニューを作るとき、細部にこだわりながら計画を立てることが得意ですか？",
            "チームや選手の目標を設定する際、理想を追求して完璧を目指すことがありますか？",
            "試合や練習中、些細なミスや課題にもすぐに気づき、それを修正したくなりますか？",
            "指導中に選手やスタッフから「こだわりすぎ」と言われることがありますか？"
        ],
        'result': [  # 結果
            "選手やチームの結果を重視し、それを基に指導方法を調整することが得意ですか？",
            "試合の結果を分析し、次回の改善点を具体的に提案することが好きですか？",
            "結果を出すために、選手に具体的な目標を設定することを重視しますか？",
            "チームの成果を上げるために、自分の指導方法を常に見直していますか？",
            "選手やチームが結果を出せるよう、長期的な目標設定と短期的な計画をバランスよく立てますか？"
        ],
        'steadiness': [  # 堅実
            "チームの練習や試合では、リスクを避けて着実に成果を上げる指導を心がけますか？",
            "選手の新しい挑戦を応援するより、基本的な技術を安定させることを優先しますか？",
            "試合の戦術を考える際、大きなリスクを伴う選択肢よりも、安全な選択肢を選びますか？",
            "チームや選手の成長を長期的に考え、ゆっくりと計画を進める方が得意ですか？",
            "試合中の作戦変更よりも、事前に立てた計画通りに進めることを重視しますか？"
        ],
        'devotion': [  # 献身
            "選手が成長するために、自分の時間を惜しまず指導を行っていますか？",
            "チーム全体の成功のために、選手を優先すべきことを第一に考えますか？",
            "選手やチームのためなら、裏方の仕事も積極的に行うことができますか？",
            "選手の長所を伸ばすことに情熱を持ち、選手の成功が自分の喜びだと感じますか？",
            "チームや選手の悩みに対して、自分にできることがないかを常に考えていますか？"
        ],
        'self_control': [  # 克己
            "練習や試合の指導で、自分の感情を抑えて冷静に選手にアドバイスをすることが多いですか？",
            "チームや選手の成長のために、自分の時間や趣味を犠牲にすることを厭わないですか？",
            "長期的な目標を見据えて、短期的な成果よりも基礎をしっかり教えることを重視しますか？",
            "他者との意見が違っても感情的にならず、冷静に話し合いを進めることが得意ですか？",
            "自分自身の指導スキルを高めるために、継続して努力をできていますか？"
        ],
        'assertion': [  # 主張
            "選手に対して、自分の指導方針や考えを明確に伝えることが得意ですか？",
            "保護者や他のコーチと意見が違うとき、自分の考えを論理的に説明して納得してもらうことが多いですか？",
            "チームの戦術や目標について、自分のアイデアを積極的に提案することがありますか？",
            "選手一人ひとりの特性に合わせて、的確にアドバイスや意見を伝えることが得意ですか？",
            "他者と意見交換をしながら、自分の考えを修正したり補強したりすることがありますか？"
        ],
        'sensitivity': [  # 繊細
            "チームの雰囲気やモチベーションが下がっていると感じると、「なんとかしなければ」と強く思い、気を使いすぎてしまうことがありますか？",
            "選手や他のコーチ、保護者の言葉や態度が気になりすぎて、自分の指導方針に迷うことがありますか？",
            "指導中に、選手が言葉にしなくても困っていることを察することが多いですか？",
            "試合や練習の環境や状況の細かい違いにすぐ気づき、対応できることが多いですか？",
            "試合や練習中の気温、グラウンドの状態、選手同士のちょっとした変化に敏感で、それに合わせた対応をすることが多いですか？"
        ],
        'intuition': [  # 直感
            "練習や試合での状況を見て、即座に選手に適切な指示を出すことが得意ですか？",
            "指導方法を事前に計画するより、その場の状況や選手の反応を見て判断することが多いですか？",
            "新しい戦術や練習法を感覚的に理解し、すぐに取り入れることが得意ですか？",
            "チームや選手の調子を見て、直感的に何を改善すべきかがわかることがありますか？",
            "試合中に選手やチームの動きから、次に起こることを予測することができますか？"
        ],
        'introspection': [  # 内省
            "練習や試合が終わった後、指導がどれだけ効果的だったかを振り返ることがありますか？",
            "選手やチームの成長を見たとき、その背景や自分の指導の影響について深く考えることが多いですか？",
            "自分の指導スタイルやアプローチを定期的に見直すことが得意ですか？",
            "チームが目標を達成できなかったとき、その原因や改善方法についてじっくり考えることがありますか？",
            "新しい学びや洞察を得ることが好きですか？"
        ],
        'comparison': [  # 比較
            "選手一人ひとりの特徴を比較して、効果的な指導方法を考えることが得意ですか？",
            "チームの現状を他のチームと比べて、改善点を見つけることが好きですか？",
            "他のコーチの指導スタイルを観察し、学ぶことが多いですか？",
            "選手間のスキルや役割を比較して、最適な配置や戦術を考えるのが得意ですか？",
            "チームや選手の成長を、他のチームや過去の成績と比較して評価することがありますか？"
        ]
    },
    
    # 母親向けアスリートマインド質問
    'mother': {
        'commitment': [  # こだわり
            "お子さんの道具やユニフォームがきちんとしていないと気になってしまいますか？",
            "試合や練習のサポートで、細かい準備や手配に力を入れることが多いですか？",
            "お子さんの成績や結果よりも、練習の過程や細かい努力のほうが気になることがありますか？",
            "周囲の人から「細かいところに気を配りすぎ」と言われることがありますか？",
            "家庭での準備やサポートで、完璧を目指して努力することが多いですか？"
        ],
        'result': [  # 結果
            "お子さんの試合や練習の成果を見て、「どのようにサポートすればもっと良い結果が出せるか」を考えますか？",
            "試合の結果や成績を基に、次回の準備を考えることが多いですか？",
            "お子さんの成果が目に見える形でわかると、やりがいを感じますか？",
            "他の家庭のサポート方法を参考にして、お子さんの結果を良くする工夫をしますか？",
            "チームやお子さんの結果が良くなるために、他の保護者やコーチと積極的に協力しますか？"
        ],
        'steadiness': [  # 堅実
            "お子さんが試合や練習で失敗しないよう、十分な準備やサポートを行うことが大事だと思いますか？",
            "お子さんの挑戦を促すよりも、得意な部分を伸ばすことを優先していますか？",
            "家庭でのサポート計画をしっかり立て、確実に実行することが得意ですか？",
            "コーチや他の保護者と相談して、慎重に方針を決めることが多いですか？",
            "お子さんが少しずつでも確実に成長する姿を見守る方が安心しますか？"
        ],
        'devotion': [  # 献身
            "お子さんのスポーツ活動を支えるために、自分の時間を費やすことに抵抗がないですか？",
            "お子さんの進歩や成長を、自分のことのように喜ぶことができますか？",
            "お子さんがスムーズに活動できるように、環境を整えることを優先して行いますか？",
            "サポートの負担を感じさせず、お子さんを支えようと心がけていますか？",
            "お子さんに悩みがあったときや悩んでいるときは、助けられる方法を常に考えていますか？"
        ],
        'self_control': [  # 克己
            "お子さんが遊びたがるときでも、練習や宿題を優先するように促すことができますか？",
            "家庭でのサポートのために、自分の時間を調整して計画的に行動することが多いですか？",
            "お子さんの食事や体調管理を考えて、食材選びや生活リズムを大切にしていますか？",
            "スポーツ活動のために、家族旅行や趣味を控えることが苦ではありませんか？",
            "他の保護者やコーチと違う意見があっても、冷静にコミュニケーションを取ることが得意ですか？"
        ],
        'assertion': [  # 主張
            "コーチや他の保護者に対して、自分の考えや意見をしっかり伝えることが得意ですか？",
            "お子さんのスポーツ活動で、気になることがあれば積極的に質問や意見を伝えていますか？",
            "他の保護者と話すとき、自分の経験や考えを共有することがありますか？",
            "家庭内で、自分の意見や提案をしっかりと伝えることが多いですか？",
            "お子さんのために、コーチや保護者と話し合いをする際、自分の考えを明確に伝えることができますか？"
        ],
        'sensitivity': [  # 繊細
            "お子さんの些細な表情や行動の変化に気づくことが多いですか？",
            "試合や練習中、お子さんの気持ちを言葉にしなくても理解できることがありますか？",
            "コーチや他の保護者の態度や雰囲気の変化に敏感だと思いますか？",
            "お子さんが困っているとき、すぐに何をすればいいかを考えることが得意ですか？",
            "応援やサポートのとき、周囲の環境や他の人の行動に影響されやすいですか？"
        ],
        'intuition': [  # 直感
            "お子さんの調子や気分を、話を聞かなくてもなんとなく感じ取ることが多いですか？",
            "試合や練習を見ながら、「この場面で何が必要か」をすぐに思いつくことがありますか？",
            "お子さんの課題や成長ポイントを、細かく分析せずに直感で把握することがありますか？",
            "応援やサポートの際、その場の雰囲気を読んで適切な行動をすることが得意ですか？",
            "お子さんが何かに挑戦するとき、「なんとかなる」と感じて見守ることが多いですか？"
        ],
        'introspection': [  # 内省
            "お子さんの練習や試合を見た後、「自分はどうサポートすればよかったか」を考えることがありますか？",
            "お子さんの成長や変化を観察し、その理由を深く考えるのが得意ですか？",
            "コーチや他の保護者との関わり方を振り返り、「もっと良い方法があるか」を考えることがありますか？",
            "家庭でのサポートがどう影響しているかを見直す時間をよく持っていますか？",
            "お子さんが成功したり失敗したりしたとき、その背景を一緒に考えることが多いですか？"
        ],
        'comparison': [  # 比較
            "お子さんと他の選手を比べて、どのようにサポートすればよいかを考えることがありますか？",
            "試合や練習を見て、他の保護者と意見交換をしながらお子さんの成長を考えることが好きですか？",
            "お子さんが他の選手よりも上手くなるために、どのような方法を取るべきか考えることがありますか？",
            "他の家庭のサポートの仕方を参考にして、工夫をすることが多いですか？",
            "お子さんの試合結果を他の選手と比較して、次に向けた改善点を話し合うことがありますか？"
        ]
    },
    
    # 父親向けアスリートマインド質問
    'father': {
        'commitment': [  # こだわり
            "試合や練習で、お子さんのプレーや態度に細かく目が行くことが多いですか？",
            "お子さんが使う道具や環境が整っていないと、気になってしまうことがありますか？",
            "試合の観戦中、チームの動きや戦術の細かい部分が気になることがありますか？",
            "練習や試合の準備で、自分なりの基準を守りたいと思うことが多いですか？",
            "家族やコーチに「細かいことを気にしすぎ」と言われることがありますか？"
        ],
        'result': [  # 結果
            "お子さんが練習や試合で良い結果を出すために、自分ができるサポートを考えることが多いですか？",
            "結果を重視して、試合後にお子さんと一緒に振り返りをすることが得意ですか？",
            "試合や練習の具体的な成果を見ることで、次の目標を考えるのが好きですか？",
            "チームやお子さんの結果を改善するために、新しい方法やアプローチを試すことがありますか？",
            "お子さんが良い結果を出せるように、家庭での準備やサポートに力を入れますか？"
        ],
        'steadiness': [  # 堅実
            "お子さんの練習や試合で、リスクの少ない選択肢を優先するよう助言することが多いですか？",
            "試合や練習の準備で、しっかりと計画を立ててから動くことが大事だと思いますか？",
            "チームやコーチとの話し合いを通じて、慎重に決定を下すことが得意ですか？",
            "新しい挑戦よりも、現在の成果を着実に積み上げることを重視しますか？",
            "お子さんが安定した成長を遂げることが最も大事だと思いますか？"
        ],
        'devotion': [  # 献身
            "お子さんのスポーツ活動に必要なことなら、積極的に手伝っていますか？",
            "試合や練習を見守り、成功を自分のことのように喜んでいますか？",
            "チームや他の保護者とも協力しながら、お子さんの活動をサポートするのが好きですか？",
            "お子さんのためになるなら前向きに検討し実行していますか？",
            "お子さんの課題を解決するためにどのように支えられるか常に考え、実行できていますか？"
        ],
        'self_control': [  # 克己
            "お子さんの目標を応援するために、自分の趣味や余暇を調整することができますか？",
            "試合や練習のサポートのために、早起きや遠出を計画的に行うことが得意ですか？",
            "お子さんが好きなことを優先しがちなときでも、必要なことに集中させるよう助言しますか？",
            "スポーツ活動に必要な準備や計画を、冷静に立てて進めることが得意ですか？",
            "コーチや他の保護者と意見が異なるとき、落ち着いて話し合いを進めることができますか？"
        ],
        'assertion': [  # 主張
            "コーチやチームスタッフに対して、意見を伝えることが得意ですか？",
            "お子さんの練習や試合の内容について、改善点や気づきを話し合うことがありますか？",
            "チームや家庭で話し合いが必要なとき、自分の意見を明確に述べることが多いですか？",
            "チームの運営や方針について、改善点や提案を積極的に発言しますか？",
            "お子さんのために、他人と議論を通じて意見を交わすことに自信がありますか？"
        ],
        'sensitivity': [  # 繊細
            "お子さんの練習や試合中の様子から、今何を考えているか感じ取ることが多いですか？",
            "試合や練習で、他の選手やコーチの態度の変化にすぐ気づくことが多いですか？",
            "家族のちょっとした言葉や行動の変化に気づき、「何かあったのかな？」と思うことがありますか？",
            "試合の応援やサポートをするとき、周囲の雰囲気を見て行動を調整することが多いですか？",
            "他の保護者やコーチと話すとき、相手の表情や話し方から気持ちを察することが多いですか？"
        ],
        'intuition': [  # 直感
            "試合や練習を見ながら、どの場面でアドバイスが必要か直感でわかることがありますか？",
            "お子さんが上手くいかないとき、何を変えれば良いのかを直感的に判断することが多いですか？",
            "チームやコーチの雰囲気を見て、どうサポートするかをその場で考えることが得意ですか？",
            "試合中の場面で、お子さんが次にどう動くべきかを予測することができますか？",
            "お子さんの挑戦に対して、「上手くいくはず」と楽観的に考えることが多いですか？"
        ],
        'introspection': [  # 内省
            "試合や練習を見た後、お子さんのプレーや態度について反省点を考えることがありますか？",
            "お子さんへのアドバイスが役に立っているかどうかを振り返ることが多いですか？",
            "自分のサポートがどう影響しているかを定期的に考えるのが得意ですか？",
            "チームや試合の結果を受けて、自分の関わり方を改善しようと考えることがありますか？",
            "お子さんとの会話や時間の過ごし方について、「もっと良い方法がないか」を考えることがありますか？"
        ],
        'comparison': [  # 比較
            "試合や練習を見て、お子さんの成績やプレーを他の選手と比べることが多いですか？",
            "お子さんがより良い結果を出すために、他の家庭や選手の工夫を取り入れることがありますか？",
            "お子さんの成長や課題を、他の選手の状況と比較して考えるのが好きですか？",
            "他の保護者やコーチの意見を参考にして、お子さんのサポート方法を調整することが多いですか？",
            "試合や練習を見て、お子さんのスキルを伸ばすための新しいアイデアを考えることがありますか？"
        ]
    },
    
    # 社会人向けアスリートマインド質問
    'adult': {
        'commitment': [  # こだわり
            "仕事で細かい作業や調整に時間をかけることが得意ですか？",
            "自分が関わるプロジェクトで、細部にこだわりすぎて時間を使いすぎることがありますか？",
            "仕事での資料や環境が整っていないと、気になって集中できないことがありますか？",
            "チームでの仕事でも、自分の理想を追求しようとすることが多いですか？",
            "他の人から「こだわりが強い」と言われることがありますか？"
        ],
        'result': [  # 結果
            "自分の仕事の成果を、具体的な結果で評価されることを好みますか？",
            "仕事での結果を振り返り、「次にもっと良い成果を出すには何が必要か」を考えることが多いですか？",
            "プロジェクトやタスクを進める際、結果を最優先に考える傾向がありますか？",
            "目標を達成するために、具体的な計画を立てて行動することが得意ですか？",
            "チームや同僚と協力して、成果を出すことを最も重要視しますか？"
        ],
        'steadiness': [  # 堅実
            "仕事では、大きなリスクを取るよりも、確実な成果を目指すことが多いですか？",
            "プロジェクトを進める際、計画をしっかり立ててから実行することが得意ですか？",
            "チームや同僚と慎重に話し合いをしてから決定を下すことが多いですか？",
            "新しい挑戦よりも、既存の業務を確実に進める方を選ぶ傾向がありますか？",
            "長期的な成功のために、短期的な利益をあえて避けることができますか？"
        ],
        'devotion': [  # 献身
            "職場の成功のために、自分の役割を超えてサポートすることがありますか？",
            "チームメンバーの仕事がスムーズに進むように、積極的に助けてあげようと思いますか？",
            "職場の雰囲気を良くするために、周囲への気配りを意識して行動しますか？",
            "誰かが困っていると、自分の仕事を止めてでも助けようと思うことがありますか？",
            "会社や組織の長期的な成長のために、自分が貢献できる方法を考えていますか？"
        ],
        'self_control': [  # 克己
            "長期的な目標のために、短期的な誘惑を我慢して計画を進めることが得意ですか？",
            "仕事での困難に直面しても、自分の感情をコントロールして冷静に対応することができますか？",
            "プロジェクトのために、自分の時間を調整して優先順位をつけることが得意ですか？",
            "チームメンバーとの意見の違いを冷静に受け入れ、建設的に話し合いを進めますか？",
            "自分の成長のために、毎日コツコツと努力を続けることができますか？"
        ],
        'assertion': [  # 主張
            "会議や打ち合わせで、自分の意見を明確に伝えることが得意ですか？",
            "職場で自分のアイデアを提案し、同僚や上司を説得することが多いですか？",
            "意見が対立した場合、冷静に自分の考えを説明し、合意を得ようとしますか？",
            "他者の意見を聞きつつ、自分の主張を補強したり修正したりすることができますか？",
            "チームやプロジェクトの目標達成のために、自分の考えをしっかり伝えることが重要だと思いますか？"
        ],
        'sensitivity': [  # 繊細
            "職場で同僚や上司の感情の変化にすぐ気づくことが多いですか？",
            "会議やチームの雰囲気が変わったとき、その原因を感じ取ることが得意ですか？",
            "同僚や部下が困っているとき、相手が言葉にしなくても察することができますか？",
            "職場の環境や状況の変化に敏感で、それに対応する力があると思いますか？",
            "他者の気持ちに配慮しすぎて、自分が疲れてしまうことがありますか？"
        ],
        'intuition': [  # 直感
            "仕事で問題が起きたとき、直感で迅速に解決策を考えることが得意ですか？",
            "会議や商談中に、相手の意図や状況を感覚的に理解することが多いですか？",
            "新しい業務や課題に取り組むとき、計画よりもスピーディーに進めることを好みますか？",
            "チームメンバーの動きを見て、次に何をすべきかを直感的に感じることがありますか？",
            "プロジェクトの結果について、基本的に「うまくいく」と楽観的に考えることが多いですか？"
        ],
        'introspection': [  # 内省
            "一日の仕事が終わった後、自分のやり方や成果について振り返ることがありますか？",
            "職場でのミスや成功について、「どうすればもっと良い結果を出せるか」を深く考えることが多いですか？",
            "同僚や上司との関わりを振り返り、自分の言動を見直すことがありますか？",
            "自分の成長を感じたとき、その背景やきっかけを考えるのが好きですか？",
            "プロジェクトの結果を受けて、個人やチームの課題をじっくり考えることが多いですか？"
        ],
        'comparison': [  # 比較
            "職場での自分の仕事ぶりを、他の同僚と比較して改善点を探すことが多いですか？",
            "競合他社や同業他社の状況を分析して、自分の仕事に活かすことが得意ですか？",
            "過去の自分と今の自分を比較して、どれだけ成長したかを考えることが好きですか？",
            "他のチームやプロジェクトと自分の状況を比べて、目標や改善点を見つけることが多いですか？",
            "周囲の評価をもとに、自分の働き方や成果を振り返ることが多いですか？"
        ]
    }
}

def update_athlete_mind_questions():
    """アスリートマインド質問を正式データに更新（統合データローダー対応）"""
    
    session = Session(engine)
    
    try:
        # 既存のアスリートマインド質問を削除
        print("🔄 既存のアスリートマインド質問を削除中...")
        deleted_count = session.query(Question).filter(
            Question.category == 'athlete_mind'
        ).delete()
        print(f"   削除した質問数: {deleted_count}問")
        
        # 正式なアスリートマインド質問を投入
        print("📝 正式なアスリートマインド質問を投入中（統合データローダー対応）...")
        
        # 現在の最大質問番号を取得（スポーツマンシップの後から開始）
        max_question_number = session.query(func.max(Question.question_number)).scalar() or 0
        question_number = max_question_number + 1
        
        added_count = 0
        
        for target, categories in ATHLETE_MIND_QUESTIONS.items():
            print(f"   {target}向け質問を追加中...")
            for subcategory, questions in categories.items():
                for question_text in questions:
                    question = Question(
                        question_number=question_number,
                        question_text=question_text,
                        category='athlete_mind',
                        subcategory=subcategory,  # 統合データローダー対応の新しい名前
                        target=target,
                        is_reverse_score=False,  # アスリートマインドは逆転スコアなし
                        is_active=True
                    )
                    session.add(question)
                    question_number += 1
                    added_count += 1
        
        session.commit()
        print(f"✅ アスリートマインド質問投入完了: {added_count}問")
        
        # 投入結果確認
        print("\n📊 投入結果確認:")
        
        # 全体の質問数
        total_questions = session.query(Question).count()
        print(f"   総質問数: {total_questions}問")
        
        # カテゴリ別確認
        category_counts = session.query(
            Question.category, 
            func.count()
        ).group_by(Question.category).all()
        
        print("   カテゴリ別:")
        for category, count in category_counts:
            print(f"     {category}: {count}問")
        
        # アスリートマインドの詳細確認
        athlete_mind_breakdown = session.query(
            Question.target,
            Question.subcategory,
            func.count()
        ).filter(
            Question.category == 'athlete_mind'
        ).group_by(
            Question.target, Question.subcategory
        ).order_by(
            Question.target, Question.subcategory
        ).all()
        
        print("\n   アスリートマインド詳細（統合データローダー対応）:")
        current_target = None
        for target, subcategory, count in athlete_mind_breakdown:
            if target != current_target:
                print(f"     {target}:")
                current_target = target
            print(f"       {subcategory}: {count}問")
        
        # 対象別質問数確認
        print("\n   対象別合計質問数:")
        for target in ['player', 'coach', 'mother', 'father', 'adult']:
            target_count = session.query(Question).filter(
                (Question.target == 'all') | (Question.target == target)
            ).count()
            print(f"     {target}: {target_count}問")
            
        print("\n🎉 統合データローダー対応版への更新完了！")
        
    except Exception as e:
        session.rollback()
        print(f"❌ エラーが発生しました: {e}")
        raise
    finally:
        session.close()

if __name__ == "__main__":
    print("🚀 アスリートマインド正式データ投入開始（統合データローダー対応）...")
    update_athlete_mind_questions()
    print("🎉 アスリートマインド正式データ投入作業完了！")